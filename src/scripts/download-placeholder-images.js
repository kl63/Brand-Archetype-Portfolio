// This script downloads placeholder images for the portfolio site
const fs = require('fs');
const path = require('path');
const https = require('https');

// Ensure the public directory exists
const publicDir = path.join(process.cwd(), 'public');
if (!fs.existsSync(publicDir)) {
  fs.mkdirSync(publicDir, { recursive: true });
}

// Helper function to download an image
async function downloadImage(url, filepath) {
  return new Promise((resolve, reject) => {
    https.get(url, (response) => {
      if (response.statusCode !== 200) {
        reject(new Error(`Failed to download image: ${response.statusCode}`));
        return;
      }

      const fileStream = fs.createWriteStream(filepath);
      response.pipe(fileStream);

      fileStream.on('finish', () => {
        fileStream.close();
        console.log(`Downloaded image to ${filepath}`);
        resolve(filepath);
      });

      fileStream.on('error', (err) => {
        fs.unlink(filepath, () => {});
        reject(err);
      });
    }).on('error', reject);
  });
}

// Download all the images for the portfolio
async function downloadAllImages() {
  try {
    // Project images - using Unsplash images (free to use)
    const imageUrls = [
      // AI Media Generator
      'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1024&q=80',
      // Creative Portfolio
      'https://images.unsplash.com/photo-1545239351-ef35f43d514b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1024&q=80',
      // Brand Archetype Engine
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1024&q=80'
    ];

    for (let i = 0; i < imageUrls.length; i++) {
      const outputPath = path.join(publicDir, `project-${i+1}.jpg`);
      await downloadImage(imageUrls[i], outputPath);
    }

    // Hero background image
    const heroImageUrl = 'https://images.unsplash.com/photo-1557683316-973673baf926?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1024&q=80';
    const heroOutputPath = path.join(publicDir, 'hero-bg.jpg');
    await downloadImage(heroImageUrl, heroOutputPath);

    console.log('All images downloaded successfully!');
  } catch (error) {
    console.error('Error in image download process:', error);
  }
}

// Run the image download
downloadAllImages();
